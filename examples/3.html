<!doctype html><html class=no-js lang=en><meta charset=utf-8><meta content="width=device-width,initial-scale=1" name=viewport><meta content="Make AI Agents Collaborate: Drag, Drop, and Orchestrate with Waldiez" name=description><link href="https://docs.waldiez.io/examples/3.html" rel="canonical"><link href=2.html rel=prev><link href=4.html rel=next><link href=../static/favicon.ico rel=icon><meta content="mkdocs-1.6.1, mkdocs-material-9.6.1" name=generator><title>Reflection - Waldiez</title><link href=../assets/stylesheets/main.a40c8224.min.css rel=stylesheet><link href=../assets/stylesheets/palette.06af60db.min.css rel=stylesheet><script src="../assets/external/unpkg.com/iframe-worker/shim.js"></script><link href="../assets/external/fonts.googleapis.com/css.49ea35f2.css" rel="stylesheet"><style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style><link href="../assets/external/fonts.googleapis.com/css2.0856cb41.css" rel="stylesheet"><link href=../static/css/main.css rel=stylesheet><script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script><body data-md-color-accent=blue data-md-color-primary=custom-light data-md-color-scheme=default dir=ltr><input autocomplete=off class=md-toggle data-md-toggle=drawer id=__drawer type=checkbox><input autocomplete=off class=md-toggle data-md-toggle=search id=__search type=checkbox><label class=md-overlay for=__drawer></label><div data-md-component=skip><a class=md-skip href=#reflection-and-blog-post-writing> Skip to content </a></div><div data-md-component=announce></div><header class=md-header data-md-component=header><nav class="md-header__inner md-grid" aria-label=Header><a class="md-header__button md-logo" aria-label=Waldiez data-md-component=logo href=../index.html title=Waldiez> <img alt=logo src=../static/images/waldie.svg> </a><label class="md-header__button md-icon" for=__drawer><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg></label><div class=md-header__title data-md-component=header-title><div class=md-header__ellipsis><div class=md-header__topic><span class=md-ellipsis> Waldiez </span></div><div class=md-header__topic data-md-component=header-topic><span class=md-ellipsis> Reflection </span></div></div></div><form class=md-header__option data-md-component=palette><input aria-label="Switch to dark mode" data-md-color-media="(prefers-color-scheme: light)" class=md-option data-md-color-accent=blue data-md-color-primary=custom-light data-md-color-scheme=default id=__palette_0 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to dark mode" for=__palette_1 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label><input aria-label="Switch to light mode" data-md-color-media="(prefers-color-scheme: dark)" class=md-option data-md-color-accent=blue data-md-color-primary=custom-dark data-md-color-scheme=slate id=__palette_1 name=__palette type=radio><label class="md-header__button md-icon" title="Switch to light mode" for=__palette_0 hidden><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M12 18c-.89 0-1.74-.2-2.5-.55C11.56 16.5 13 14.42 13 12s-1.44-4.5-3.5-5.45C10.26 6.2 11.11 6 12 6a6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg></label></form><script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script><label class="md-header__button md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg></label><div class=md-search data-md-component=search role=dialog><label class=md-search__overlay for=__search></label><div class=md-search__inner role=search><form class=md-search__form name=search><input aria-label=Search autocapitalize=off autocomplete=off autocorrect=off class=md-search__input data-md-component=search-query name=query placeholder=Search required spellcheck=false type=text><label class="md-search__icon md-icon" for=__search><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg> <svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></label><nav aria-label=Search class=md-search__options><button class="md-search__icon md-icon" aria-label=Clear tabindex=-1 title=Clear type=reset><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg></button></nav></form><div class=md-search__output><div class=md-search__scrollwrap data-md-scrollfix tabindex=0><div class=md-search-result data-md-component=search-result><div class=md-search-result__meta>Initializing search</div><ol class=md-search-result__list role=presentation></ol></div></div></div></div></div><div class=md-header__source><a title="Go to repository" class="md-source" data-md-component="source" href="https://github.com/waldiez/waldiez"> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>waldiez/waldiez</div> </a></div></nav></header><div class=md-container data-md-component=container><nav aria-label=Tabs class=md-tabs data-md-component=tabs><div class=md-grid><ul class=md-tabs__list><li class=md-tabs__item><a class=md-tabs__link href=../index.html> Home </a><li class=md-tabs__item><a class=md-tabs__link href=../usage/index.html> Getting Started </a><li class="md-tabs__item md-tabs__item--active"><a class=md-tabs__link href=index.html> Examples </a><li class=md-tabs__item><a class=md-tabs__link href=../contribute/index.html> Get Involved </a><li class=md-tabs__item><a class="md-tabs__link" href="https://waldiez.github.io"> Playground üõù </a><li class=md-tabs__item><a class=md-tabs__link href=../blog/index.html> Blog </a></ul></div></nav><main class=md-main data-md-component=main><div class="md-main__inner md-grid"><div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation><div class=md-sidebar__scrollwrap><div class=md-sidebar__inner><nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label=Navigation data-md-level=0><label class=md-nav__title for=__drawer><a class="md-nav__button md-logo" aria-label=Waldiez data-md-component=logo href=../index.html title=Waldiez> <img alt=logo src=../static/images/waldie.svg> </a> Waldiez</label><div class=md-nav__source><a title="Go to repository" class="md-source" data-md-component="source" href="https://github.com/waldiez/waldiez"> <div class="md-source__icon md-icon"><svg viewbox="0 0 448 512" xmlns=http://www.w3.org/2000/svg><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81"/></svg></div> <div class=md-source__repository>waldiez/waldiez</div> </a></div><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../index.html> <span class=md-ellipsis> Home </span> </a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" id=__nav_2 type=checkbox> <div class="md-nav__link md-nav__container"><a class=md-nav__link href=../usage/index.html> <span class=md-ellipsis> Getting Started </span> </a><label class=md-nav__link for=__nav_2 id=__nav_2_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div> <nav aria-expanded=false aria-labelledby=__nav_2_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_2><span class="md-nav__icon md-icon"></span> Getting Started</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../usage/models.html> <span class=md-ellipsis> Models </span> </a><li class=md-nav__item><a class=md-nav__link href=../usage/skills.html> <span class=md-ellipsis> Skills </span> </a><li class=md-nav__item><a class=md-nav__link href=../usage/agents.html> <span class=md-ellipsis> Agents </span> </a><li class=md-nav__item><a class=md-nav__link href=../usage/flow.html> <span class=md-ellipsis> Flow </span> </a><li class=md-nav__item><a class=md-nav__link href=../usage/run.html> <span class=md-ellipsis> Run </span> </a><li class=md-nav__item><a class=md-nav__link href=../usage/convert.html> <span class=md-ellipsis> Convert </span> </a></ul></nav><li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested"><input class="md-nav__toggle md-toggle" checked id=__nav_3 type=checkbox> <div class="md-nav__link md-nav__container"><a class=md-nav__link href=index.html> <span class=md-ellipsis> Examples </span> </a><label class=md-nav__link for=__nav_3 id=__nav_3_label><span class="md-nav__icon md-icon"></span></label></div> <nav aria-expanded=true aria-labelledby=__nav_3_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_3><span class="md-nav__icon md-icon"></span> Examples</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=1.html> <span class=md-ellipsis> Standup Comedians </span> </a><li class=md-nav__item><a class=md-nav__link href=2.html> <span class=md-ellipsis> Onboarding </span> </a><li class="md-nav__item md-nav__item--active"><input class="md-nav__toggle md-toggle" id=__toc type=checkbox> <label class="md-nav__link md-nav__link--active" for=__toc><span class=md-ellipsis> Reflection </span> <span class="md-nav__icon md-icon"></span></label> <a class="md-nav__link md-nav__link--active" href=3.html> <span class=md-ellipsis> Reflection </span> </a> <nav aria-label="Table of contents" class="md-nav md-nav--secondary"><label class=md-nav__title for=__toc><span class="md-nav__icon md-icon"></span> Table of contents</label><ul class=md-nav__list data-md-component=toc data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=#reflection-and-blog-post-writing> <span class=md-ellipsis> Reflection and Blog post Writing </span> </a> <nav aria-label="Reflection and Blog post Writing" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#agent-roles> <span class=md-ellipsis> Agent Roles </span> </a><li class=md-nav__item><a class=md-nav__link href=#models-used> <span class=md-ellipsis> Models Used </span> </a><li class=md-nav__item><a class=md-nav__link href=#setup-the-agents> <span class=md-ellipsis> Setup the Agents </span> </a> <nav aria-label="Setup the Agents" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#seo-reviewer> <span class=md-ellipsis> SEO Reviewer </span> </a><li class=md-nav__item><a class=md-nav__link href=#legal-reviewer> <span class=md-ellipsis> Legal Reviewer </span> </a><li class=md-nav__item><a class=md-nav__link href=#ethics-reviewer> <span class=md-ellipsis> Ethics Reviewer </span> </a><li class=md-nav__item><a class=md-nav__link href=#meta-reviewer> <span class=md-ellipsis> Meta Reviewer </span> </a><li class=md-nav__item><a class=md-nav__link href=#writer-agent> <span class=md-ellipsis> Writer Agent </span> </a><li class=md-nav__item><a class=md-nav__link href=#critic-agent> <span class=md-ellipsis> Critic Agent </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#agent-connections> <span class=md-ellipsis> Agent Connections </span> </a> <nav aria-label="Agent Connections" class=md-nav><ul class=md-nav__list><li class=md-nav__item><a class=md-nav__link href=#writer-critic> <span class=md-ellipsis> Writer => Critic </span> </a><li class=md-nav__item><a class=md-nav__link href=#nested-chats> <span class=md-ellipsis> Nested chats </span> </a><li class=md-nav__item><a class=md-nav__link href=#nested-chat-registration> <span class=md-ellipsis> Nested chat registration </span> </a></ul></nav><li class=md-nav__item><a class=md-nav__link href=#4-workflow-flow-order> <span class=md-ellipsis> 4. Workflow Flow Order </span> </a><li class=md-nav__item><a class=md-nav__link href=#5-run-the-flow> <span class=md-ellipsis> 5. Run the flow </span> </a></ul></nav></ul></nav><li class=md-nav__item><a class=md-nav__link href=4.html> <span class=md-ellipsis> Tool Use </span> </a><li class=md-nav__item><a class=md-nav__link href=5.html> <span class=md-ellipsis> Coding </span> </a><li class=md-nav__item><a class=md-nav__link href=6.html> <span class=md-ellipsis> Planning </span> </a><li class=md-nav__item><a class=md-nav__link href=7.html> <span class=md-ellipsis> RAG </span> </a><li class=md-nav__item><a class=md-nav__link href=8.html> <span class=md-ellipsis> ReAct </span> </a></ul></nav><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" id=__nav_4 type=checkbox> <div class="md-nav__link md-nav__container"><a class=md-nav__link href=../contribute/index.html> <span class=md-ellipsis> Get Involved </span> </a></div> <nav aria-expanded=false aria-labelledby=__nav_4_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_4><span class="md-nav__icon md-icon"></span> Get Involved</label><ul class=md-nav__list data-md-scrollfix></ul></nav><li class=md-nav__item><a class="md-nav__link" href="https://waldiez.github.io"> <span class=md-ellipsis> Playground üõù </span> </a><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" id=__nav_6 type=checkbox> <div class="md-nav__link md-nav__container"><a class=md-nav__link href=../blog/index.html> <span class=md-ellipsis> Blog </span> </a><label class=md-nav__link for=__nav_6 id=__nav_6_label tabindex=0><span class="md-nav__icon md-icon"></span></label></div> <nav aria-expanded=false aria-labelledby=__nav_6_label class=md-nav data-md-level=1><label class=md-nav__title for=__nav_6><span class="md-nav__icon md-icon"></span> Blog</label><ul class=md-nav__list data-md-scrollfix><li class="md-nav__item md-nav__item--nested"><input class="md-nav__toggle md-toggle" id=__nav_6_2 type=checkbox> <label class=md-nav__link for=__nav_6_2 id=__nav_6_2_label tabindex=0><span class=md-ellipsis> Categories </span> <span class="md-nav__icon md-icon"></span></label> <nav aria-expanded=false aria-labelledby=__nav_6_2_label class=md-nav data-md-level=2><label class=md-nav__title for=__nav_6_2><span class="md-nav__icon md-icon"></span> Categories</label><ul class=md-nav__list data-md-scrollfix><li class=md-nav__item><a class=md-nav__link href=../blog/category/customer-onboarding.html> <span class=md-ellipsis> Customer onboarding </span> </a><li class=md-nav__item><a class=md-nav__link href=../blog/category/sequential-chats.html> <span class=md-ellipsis> Sequential chats </span> </a><li class=md-nav__item><a class=md-nav__link href=../blog/category/standup-comedians.html> <span class=md-ellipsis> Standup comedians </span> </a></ul></nav></ul></nav></ul></nav></div></div></div><div class=md-content data-md-component=content><article class="md-content__inner md-typeset"><h1>Reflection</h1><h2 id=reflection-and-blog-post-writing>Reflection and Blog post Writing<a title="Permanent link" class=headerlink href=#reflection-and-blog-post-writing>¬∂</a></h2><p><img alt="Example 3 overview" src=../static/images/light/examples/3/overview.webp#only-light> <img alt="Example 3 overview" src=../static/images/dark/examples/3/overview.webp#only-dark><p>In this example, we will setup up a workflow for reviewing and improving blog posts using nested chats. The workflow includes roles for a writer, critic, and various reviewers (SEO, Legal, Ethics, and Meta).<h3 id=agent-roles>Agent Roles<a title="Permanent link" class=headerlink href=#agent-roles>¬∂</a></h3><ul><li><strong>Writer</strong>: Writes blog posts based on given topics.<li><strong>Critic</strong>: Asks for reviews and provides feedback on the writer's work.<li><strong>SEO Reviewer</strong>: Optimizes content for search engines.<li><strong>Legal Reviewer</strong>: Ensures content is legally compliant.<li><strong>Ethics Reviewer</strong>: Ensures content is ethically sound.<li><strong>Meta Reviewer</strong>: Aggregates feedback from other reviewers.</ul><h3 id=models-used>Models Used<a title="Permanent link" class=headerlink href=#models-used>¬∂</a></h3><p>Feel free to use any models that suit your requirements. Here are the models used in this example:<ul><li><strong>SEO Reviewer</strong>: <code>gpt-3.5-turbo</code><li><strong>Legal Reviewer</strong>: <code>gpt-3.5-turbo</code><li><strong>Ethics Reviewer</strong>: <code>gpt-3.5-turbo</code><li><strong>Meta Reviewer</strong>: <code>gpt-3.5-turbo</code><li><strong>Writer</strong>: <code>gpt-3.5-turbo</code><li><strong>Critic</strong>: <code>gpt-3.5-turbo</code></ul><h3 id=setup-the-agents>Setup the Agents<a title="Permanent link" class=headerlink href=#setup-the-agents>¬∂</a></h3><h4 id=seo-reviewer>SEO Reviewer<a title="Permanent link" class=headerlink href=#seo-reviewer>¬∂</a></h4><ol><li>Add an agent named <strong>SEO reviewer</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-0-1><a href=#__codelineno-0-1 id=__codelineno-0-1 name=__codelineno-0-1></a>You are an SEO reviewer, known for your ability to optimize content for search engines, ensuring that it ranks well and attracts organic traffic. Make sure your suggestion is concise (within 3 bullet points), concrete and to the point. Begin the review by stating your role.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><h4 id=legal-reviewer>Legal Reviewer<a title="Permanent link" class=headerlink href=#legal-reviewer>¬∂</a></h4><ol><li>Add an agent named <strong>Legal reviewer</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-1-1><a href=#__codelineno-1-1 id=__codelineno-1-1 name=__codelineno-1-1></a>You are a legal reviewer, known for your ability to ensure that content is legally compliant and free from any potential legal issues. Make sure your suggestion is concise (within 3 bullet points), concrete and to the point. Begin the review by stating your role.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><h4 id=ethics-reviewer>Ethics Reviewer<a title="Permanent link" class=headerlink href=#ethics-reviewer>¬∂</a></h4><ol><li>Add an agent named <strong>Ethics reviewer</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-2-1><a href=#__codelineno-2-1 id=__codelineno-2-1 name=__codelineno-2-1></a>You are an ethics reviewer, known for your ability to ensure that content is ethically sound and free from any potential ethical issues. Make sure your suggestion is concise (within 3 bullet points), concrete and to the point. Begin the review by stating your role.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><h4 id=meta-reviewer>Meta Reviewer<a title="Permanent link" class=headerlink href=#meta-reviewer>¬∂</a></h4><ol><li>Add an agent named <strong>Meta reviewer</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-3-1><a href=#__codelineno-3-1 id=__codelineno-3-1 name=__codelineno-3-1></a>You are a meta reviewer, you aggregate and review the work of other reviewers and give a final suggestion on the content.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><hr><h4 id=writer-agent>Writer Agent<a title="Permanent link" class=headerlink href=#writer-agent>¬∂</a></h4><ol><li>Add a new agent named <strong>Writer</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-4-1><a href=#__codelineno-4-1 id=__codelineno-4-1 name=__codelineno-4-1></a>You are a writer. You write engaging and concise blog posts (with title) on given topics. You must polish your writing based on the feedback you receive and give a refined version. Only return your final work without additional comments.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><h4 id=critic-agent>Critic Agent<a title="Permanent link" class=headerlink href=#critic-agent>¬∂</a></h4><ol><li>Add a new agent named <strong>Critic</strong>.<li><p>In the <em>System Message</em>, set:</p> <div class="language-text highlight"><pre><span></span><code><span id=__span-5-1><a href=#__codelineno-5-1 id=__codelineno-5-1 name=__codelineno-5-1></a>You are a critic. You review the work of the writer and provide constructive feedback to help improve the quality of the content.
</span></code></pre></div><li><p>Link the agent to a model.</p></ol><div class="admonition note"><p class=admonition-title>Note<p>We will come back to the Critic agent to configure nested chats after setting up the agent connections.</div><hr><h3 id=agent-connections>Agent Connections<a title="Permanent link" class=headerlink href=#agent-connections>¬∂</a></h3><h4 id=writer-critic>Writer => Critic<a title="Permanent link" class=headerlink href=#writer-critic>¬∂</a></h4><ol><li>Connect the <strong>Critic</strong> agent to the <strong>Writer</strong> agent.<li>On the message tab, set the type to "Text" and the content to:<div class="language-text highlight"><pre><span></span><code><span id=__span-6-1><a href=#__codelineno-6-1 id=__codelineno-6-1 name=__codelineno-6-1></a>Write a concise but engaging blog post about DeepLearning.AI. Make sure the blog post is within 100 words.
</span></code></pre></div></ol><h4 id=nested-chats>Nested chats<a title="Permanent link" class=headerlink href=#nested-chats>¬∂</a></h4><p>For the rest of the connections, we will set up nested chats to gather feedback from the SEO, Legal, Ethics, and Meta reviewers. Add a link from the <strong>Critic</strong> agent to each of the reviewers, and set the chat type to "Nested Chat". Set <strong>Max turns</strong> to 1 and <strong>Summary method</strong> to "Last Message". For the nested chat content, we will use a custom method to send the content to the SEO, Legal, and Ethics reviewers:<div class="language-python highlight"><pre><span></span><code><span id=__span-7-1><a href=#__codelineno-7-1 id=__codelineno-7-1 name=__codelineno-7-1></a><span class=k>def</span><span class=w> </span><span class=nf>nested_chat_message</span><span class=p>(</span><span class=n>recipient</span><span class=p>,</span> <span class=n>messages</span><span class=p>,</span> <span class=n>sender</span><span class=p>,</span> <span class=n>config</span><span class=p>):</span>
</span><span id=__span-7-2><a href=#__codelineno-7-2 id=__codelineno-7-2 name=__codelineno-7-2></a><span class=sd>"""Ask for a review."""</span>
</span><span id=__span-7-3><a href=#__codelineno-7-3 id=__codelineno-7-3 name=__codelineno-7-3></a><span class=k>return</span> <span class=sa>f</span><span class=s2>"""Review the following content.</span>
</span><span id=__span-7-4><a href=#__codelineno-7-4 id=__codelineno-7-4 name=__codelineno-7-4></a><span class=s2>        </span><span class=se>\n\n</span><span class=s2> </span><span class=si>{</span><span class=n>recipient</span><span class=o>.</span><span class=n>chat_messages_for_summary</span><span class=p>(</span><span class=n>sender</span><span class=p>)[</span><span class=o>-</span><span class=mi>1</span><span class=p>][</span><span class=s1>'content'</span><span class=p>]</span><span class=si>}</span><span class=s2>"""</span>
</span></code></pre></div><p><img alt="Nested Chat message" src=../static/images/light/examples/3/nested_message.webp#only-light> <img alt="Nested Chat message" src=../static/images/dark/examples/3/nested_message.webp#only-dark><p>For the Meta reviewer, we use the "Text" type:<div class="language-text highlight"><pre><span></span><code><span id=__span-8-1><a href=#__codelineno-8-1 id=__codelineno-8-1 name=__codelineno-8-1></a>Aggregate feedback from all reviewers and give final suggestions on the writing.
</span></code></pre></div><h4 id=nested-chat-registration>Nested chat registration<a title="Permanent link" class=headerlink href=#nested-chat-registration>¬∂</a></h4><ol><li>Go to the <strong>Critic</strong> agent‚Äôs settings and navigate to the <em>Nested Chats</em> tab.<li>The nested chat is triggered when the writer replies to the critic's message with the content to be reviewed, so on the "Triggered by" select the <strong>Writer</strong> agent and check the "Agent's reply" box.<li>Set up the messages to be sent when the chat is triggered:<ul><li><strong>Critic => SEO reviewer</strong><li><strong>Critic => Legal reviewer</strong><li><strong>Critic => Ethics reviewer</strong><li><strong>Critic => Meta reviewer</strong></ul></ol><hr><h3 id=4-workflow-flow-order>4. <strong>Workflow Flow Order</strong><a title="Permanent link" class=headerlink href=#4-workflow-flow-order>¬∂</a></h3><ol><li>Open the <strong>Edit Flow</strong> menu.<li>Name the flow as <strong>Reflection</strong> or another suitable name.<li>Set the initial flow order to start with <strong>Critic => Writer</strong>.</ol><hr><h3 id=5-run-the-flow>5. Run the flow<a title="Permanent link" class=headerlink href=#5-run-the-flow>¬∂</a></h3><p>We are ready to run the flow. Hit the play button to start the flow. The critic will ask the writer to write a blog post about DeepLearning.AI. The writer will then write the blog post and send it to the critic for review. The critic will then send the content to the SEO, Legal, Ethics, and Meta reviewers for feedback. You can check the logs to see the flow of the conversation.<p><img alt="Nested Chat message" src=../static/images/light/examples/3/logs.webp#only-light> <img alt="Nested Chat message" src=../static/images/dark/examples/3/logs.webp#only-dark><p>Files used in this example:<ul><li>Flow: <a href="https://github.com/waldiez/examples/blob/main/03%20-%20Reflection/Reflection.waldiez">Reflection.waldiez</a></ul></article></div><script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script></div><button class="md-top md-icon" data-md-component=top hidden type=button><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg> Back to top</button></main><footer class=md-footer><nav class="md-footer__inner md-grid" aria-label=Footer><a aria-label="Previous: Onboarding" class="md-footer__link md-footer__link--prev" href=2.html> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg></div> <div class=md-footer__title><span class=md-footer__direction> Previous </span><div class=md-ellipsis>Onboarding</div></div> </a><a aria-label="Next: Tool Use" class="md-footer__link md-footer__link--next" href=4.html> <div class=md-footer__title><span class=md-footer__direction> Next </span><div class=md-ellipsis>Tool Use</div></div> <div class="md-footer__button md-icon"><svg viewbox="0 0 24 24" xmlns=http://www.w3.org/2000/svg><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11z"/></svg></div> </a></nav><div class="md-footer-meta md-typeset"><div class="md-footer-meta__inner md-grid"><div class=md-copyright><div class=md-copyright__highlight>Copyright ¬© 2024 - 2025 Waldiez</div> Made with <a href="https://squidfunk.github.io/mkdocs-material/" rel="noopener" target="_blank"> Material for MkDocs </a></div></div></div></footer></div><div class=md-dialog data-md-component=dialog><div class="md-dialog__inner md-typeset"></div></div><script id=__config type=application/json>{"base": "..", "features": ["navigation.footer", "navigation.indexes", "navigation.instant", "navigation.sections", "navigation.tabs", "navigation.top", "navigation.tracking", "search.highlight", "toc.follow", "toc.integrate"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script><script src=../assets/javascripts/bundle.5090c770.min.js></script><script src=../js/open_in_new_tab.js></script>